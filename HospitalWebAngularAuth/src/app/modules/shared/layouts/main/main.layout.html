<header class="navbar">
    <div>
        <button class="menu" (click)="toggleMenu($event)">&equiv;</button>
        <figure>
            <img src="/assets/img/code-minds.png" alt="Code Minds" />
        </figure>
    </div>
    <!-- Sintaxis para obsevables con async pipes -->
    <!-- El evitar el event bubbling en el sidenav evita que este se cierre por el host listener de body  -->
    <nav (click)="$event.stopPropagation()" class="account-menu" *ngIf="($user | async) as user">
        <button (click)="toggleAccountMenu()" [ngClass]="{'open': accountMenuOpen}" class="account-menu-toggle material-symbols-sharp">account_circle</button>
        <ul *ngIf="accountMenuOpen">
            <li class="user">{{user.firstName}} {{user.lastName}}</li>
            <li>
                <button (click)="logout()">Logout</button>
            </li>
        </ul>  
    </nav>
</header>
<section class="wrapper">
    <!-- El evitar el event bubbling en el sidenav evita que este se cierre por el host listener de body  -->
    <nav class="sidenav" (click)="$event.stopPropagation()" [ngClass]="{'open': menuOpen}">
        <h3 class="category main">Men&uacute; Principal</h3>
        <!-- 
        A pesar que el evento click del padre "sidenav" evita la propagación para que el menú se cierre,
        con el evento click en menu queremos que al navegar correctamente en una de las opciones el menú 
        se cierre para que el usuario pueda ver la pantalla.
        -->
        <ul class="menu" (click)="handleMenuNavigate()">
            <li routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
                <a routerLink="/">
                    <span>Citas</span> 
                </a>
            </li>
            <li routerLinkActive="active">
                <a routerLink="/doctors">
                    <span>Doctores</span> 
                </a>
            </li>
            <li routerLinkActive="active">
                <a routerLink="/patients">
                    <span>Pacientes</span> 
                </a>
            </li>
        </ul>
    </nav>
    <main class="page">
        <!-- Sintaxis para obsevables con async pipes -->
        <h1 *ngIf="($siteTitle | async) as siteTitle">{{siteTitle}}</h1>
        <!-- 
        Cuando usamos este layout como component de una ruta padre, la ruta hija inyecta su propio
        component justo después de este tag especial "router-outlet".
        -->
        <router-outlet></router-outlet>
    </main>
</section>